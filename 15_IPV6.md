# **IPV6**

## IPv6 Nedir?

IPv6 (Internet Protocol version 6), internet üzerindeki cihazların birbirleriyle iletişim kurmasını sağlayan IP (Internet Protocol) protokolünün en güncel sürümüdür. IPv4’ün (Internet Protocol version 4) yerini almak üzere geliştirilmiştir. Temel amacı, IPv4’ün sınırlı adres kapasitesini aşmak ve modern internet ihtiyaçlarını karşılamaktır.

IPv6, 128 bitlik adresleme sistemi kullanır. Bu sayede teorik olarak 2¹²⁸ (yaklaşık 3.4 x 10³⁸) adet benzersiz IP adresi sunar. Bu sayı, dünya üzerindeki her bir kum tanesi için bile trilyonlarca IP adresi tanımlamaya yetecek kadar büyüktür. IPv6 sayesinde, günümüzde hızla artan internet bağlantılı cihazlar (IoT, akıllı telefonlar, sunucular vb.) için yeterli IP adresi sağlanabilir.

## IPv4 ile IPv6 Arasındaki Farklar

| Özellik                     | IPv4                         | IPv6                                            |
| --------------------------- | ---------------------------- | ----------------------------------------------- |
| **Adres Uzunluğu**          | 32 bit                       | 128 bit                                         |
| **Adres Formatı**           | Ondalık (örn. 192.168.1.1)   | Onaltılık (örn. 2001\:db8::1)                   |
| **Adres Sayısı**            | Yaklaşık 4.3 milyar          | 2¹²⁸ (3.4 x 10³⁸)                               |
| **Başlık Yapısı**           | Karmaşık, değişken uzunlukta | Daha basit, sabit uzunlukta                     |
| **Adres Atama**             | DHCP veya manuel             | Otomatik (Stateless Autoconfiguration) destekli |
| **Güvenlik**                | Opsiyonel IPSec              | Zorunlu IPSec desteği                           |
| **Broadcast**               | Kullanılır                   | Kaldırılmış, yerine multicast ve anycast        |
| **NAT Kullanımı**           | Yaygın                       | Gerek yok (her cihaza global adres verilebilir) |
| **Yönlendirme Verimliliği** | Orta                         | Yüksek                                          |
| **Mobil Destek**            | Sınırlı                      | Daha iyi mobil cihaz desteği                    |
| **Başlık Alanları**         | 12 adet                      | 8 adet (daha sade)                              |

IPv6, temel olarak daha güvenli, daha ölçeklenebilir ve daha verimli bir internet altyapısı sunmak üzere tasarlanmıştır. IPv4’ün sınırlamaları (adres yetersizliği, NAT zorunluluğu gibi) IPv6 ile aşılmıştır. Ancak, IPv6'ya geçişin yavaş olmasının başlıca nedeni, mevcut IPv4 altyapısının hâlâ yaygın olarak kullanılması ve geçiş maliyetleridir.

## IPv6 Adres Yapısı 

IPv6 adresi, **128 bit uzunluğundadır** ve bu, toplamda yaklaşık **3.4 x 10³⁸** (340 undecillion) farklı adres sağlar. Bu sayı, dünyadaki her bir insan için milyarlarca IP adresi tahsis edebilecek kadar büyüktür.

### Adresin Formatı:

IPv6 adresleri, **8 adet 16 bitlik blok** şeklinde yazılır. Her blok, **4 adet hexadecimal (onaltılık) karakterden** oluşur ve bloklar **iki nokta üst üste (`:`) ile ayrılır:

#### Örnek:

```
2001:0db8:0000:0000:0000:ff00:0042:8329
```

Her blok şu şekilde ayrılmıştır:

```
2001 : 0db8 : 0000 : 0000 : 0000 : ff00 : 0042 : 8329
```

### Kısaltma Kuralları

IPv6 adresleri, okunabilirliği artırmak için bazı **kısaltma yöntemleri** içerir:

#### 1. **Sıfırların Kaldırılması**:

* Her blokta **başta gelen sıfırlar atılabilir**:

  * `0db8` → `db8`
  * `0042` → `42`

#### 2. **Arka Arkaya Gelen 0 Bloklarının ************************`::`************************ ile Gösterimi**:

* Tekrar eden **bir veya birden fazla sıfır bloğu**, **yalnızca bir kez** `::` ile kısaltılabilir:

  ```
  2001:0db8:0000:0000:0000:0000:0042:8329 → 2001:db8::42:8329
  ```

**UYARI:** Adreste sadece bir kez `::` kullanılabilir. Aksi takdirde hangi sıfırların nerede olduğu belirsizleşir.

#### Tam, Kısmi ve Kısaltılmış Hali:

```
Tam Adres        : 2001:0db8:0000:0000:0000:ff00:0042:8329  
Kısmi            : 2001:db8:0:0:0:ff00:42:8329  
Kısaltılmış      : 2001:db8::ff00:42:8329
```

### Adresin Yapısal Bölünmesi

IPv6 adresi genellikle **ikiye ayrılır**:

| Bölüm            | Bit Sayısı | Açıklama                                                   |
| ---------------- | ---------- | ---------------------------------------------------------- |
| **Ağ (Prefix)**  | 64 bit     | Ağ kısmı. Genellikle yönlendiriciler tarafından belirlenir |
| **Interface ID** | 64 bit     | Cihazın yerel ağ içindeki benzersiz kimliği                |

> IPv6, **otomatik adres ataması** için cihazların MAC adresini kullanarak Interface ID'yi otomatik oluşturabilir (EUI-64 yöntemi).

## IPv6 Adres Türleri ve Kullanım Alanları (Detaylı Açıklama)

IPv6, adresleri **kullanım amacına göre** sınıflandırır. IPv4'teki "Broadcast" türü IPv6’da **yerine Multicast ve Anycast** sistemleriyle kaldırılmıştır.

### 1. **Unicast Adresler (Tekil Yayın)**

Unicast adres, tek bir cihazın arayüzünü temsil eder. Paket sadece **hedef cihaza** ulaşır.

#### 🔹 A. Global Unicast Address (GUA)

* İnternet üzerinden yönlendirilebilen adreslerdir.
* IPv6’daki **public IP**’lerdir.
* Başlangıç bloğu: `2000::/3`
* Ağlar genelde `/64` subnet ile yapılandırılır.

Kullanım Alanı:

* İnternet bağlantısı olan sunucular, routerlar, cihazlar.

**Örnek:**

```
2001:0db8:1234:0001::1
```

#### 🔹 B. Link-Local Address

* Otomatik olarak cihaz tarafından atanır.
* Yalnızca aynı fiziksel veya mantıksal ağ segmentindeki cihazlar arasında geçerlidir.
* **Başlangıç bloğu:** `fe80::/10`
* **Yönlendirilemez** — başka bir ağda kullanılamaz.
* Bir cihazda birden fazla arayüz varsa her biri için farklı bir link-local adresi olabilir.

Kullanım Alanı:

* Router keşfi (ND), yönlendirme protokolleri (RIPng, OSPFv3)

Örnek:

```
fe80::1a2b:3c4d:5e6f:1234%eth0
```

> `%eth0`, Linux’ta link-local adresin hangi arayüze ait olduğunu belirtir.

#### 🔹 C. Unique Local Address (ULA)

* Yönlendirici ile internete çıkmayan yerel adreslerdir.
* IPv4'teki `10.0.0.0/8`, `192.168.0.0/16` gibidir.
* **Başlangıç bloğu:** `fc00::/7` (genelde `fd00::/8` kullanılır)

Kullanım Alanı:

* Şirket içi özel ağlar
* VPN ağları
* Yönlendirme testleri

Örnek:

```
fd12:3456:abcd::1
```

### 2. **Multicast Adresler (Çok Noktaya Yayın)**

Multicast adres, bir **cihaz grubuna veri gönderilmesini** sağlar. IPv6, IPv4'teki Broadcast sistemini desteklemez; bunun yerine multicast kullanılır.

#### Kullanım Alanları:

* Router keşfi (ff02::2)
* Tüm cihazlar (ff02::1)
* OSPFv3, DHCPv6 gibi protokoller

#### Başlangıç bloğu: `ff00::/8`

Örnekler:

| Adres       | Açıklama                          |
| ----------- | --------------------------------- |
| `ff02::1`   | Aynı linkteki tüm cihazlar        |
| `ff02::2`   | Aynı linkteki tüm yönlendiriciler |
| `ff05::1:3` | Site düzeyindeki DHCP sunucuları  |

> `ff0x::` yapısında **x** karakteri kapsamı belirtir:
>
> * `1` = Interface-local
> * `2` = Link-local
> * `5` = Site-local
> * `e` = Global

### 3. **Anycast Adresler (En Yakın Tekil Yayın)**

Aynı adres **birden fazla cihazda** bulunabilir, ama istemci paketini sadece **en yakın** cihaza gönderir. Yani **tek bir cihaz yanıt verir**.

* IPv6 protokolünde tanımlanmaz; yapılandırma yönlendirici düzeyinde yapılır.
* Adresler normal **global unicast adreslerden** seçilir.

Kullanım Alanı:

* CDN sunucuları (Cloudflare, Google DNS vs.)
* En yakın DNS veya proxy sunucusuna yönlendirme
* Yük dengeleme

Örnek Senaryo:

```
Google DNS IPv6: 2001:4860:4860::8888
```

Bu adres birden fazla Google sunucusunda bulunur, istemci en yakına yönlendirilir.

### IPv6 Yayın Modelleri Özeti

| Yayın Türü | Açıklama                                                             |
| ---------- | -------------------------------------------------------------------- |
| Unicast    | Belirli bir cihaza veri gönderilir                                   |
| Multicast  | Belirli bir grup cihazın tamamına veri gönderilir                    |
| Anycast    | Aynı adresi taşıyan cihazlardan en yakına veri yönlendirilir         |
| Broadcast  | (IPv6'da yoktur) IPv4’teki gibi tüm ağ cihazlarına gönderim yapılmaz |


## IPv6 Otomatik Adres Atama Yöntemleri

IPv6 adresleme sistemi, adreslerin manuel atanmasını gerektirmeyecek şekilde tasarlanmıştır. Bu sayede sistem yöneticilerinin yükü hafifler, cihazlar kendi adreslerini dinamik olarak alabilir ve ağda hızlı bir şekilde kullanılabilir hâle gelirler.

IPv6'da otomatik adres atama için **üç ana yöntem** vardır:

### 1. **Stateless Address Autoconfiguration (SLAAC)**

SLAAC, IPv6'nın en temel otomatik adres atama yöntemidir. **Cihazlar, herhangi bir DHCP sunucusuna ihtiyaç duymadan kendi IPv6 adreslerini otomatik olarak oluşturur.**

####  SLAAC Nasıl Çalışır?

1. Cihaz, ağ bağlantısı kurduğunda bir **Link-Local** adres oluşturur (`fe80::/10`).
2. Bu adresi Neighbor Discovery Protocol (NDP) ile ağda başka cihaz kullanıyor mu diye kontrol eder (Duplicate Address Detection - DAD).
3. Yönlendirici, ağda **Router Advertisement (RA)** mesajları gönderir. Bu mesajlar aşağıdaki bilgileri içerir:

   * Ağın prefix bilgisi (örneğin: `2001:db8:1::/64`)
   * Otomatik adresleme yapılabileceğini gösteren flag (A-bit)
4. Cihaz, bu prefix ile birlikte **Interface ID** oluşturur (genelde MAC adresinden türetilir).
5. Cihazın IPv6 adresi şöyle oluşur:

   ```
   [Network Prefix] + [Interface ID]
   Örn: 2001:db8:1:: + 1a2b:3c4d:5e6f:1234 → 2001:db8:1::1a2b:3c4d:5e6f:1234
   ```

#### Avantajları:

* DHCP sunucusu gerekmez.
* Kurulumu basittir.
* Cihazlar hemen çalışır hâle gelir.

####  Sınırlamaları:

* DNS adresleri genellikle atanmaz (RA içinde Recursive DNS Server özelliği yoksa).
* Gelişmiş kontrol mekanizmaları yoktur.

### 2. **Stateful DHCPv6 (DHCPv6)**

Stateful DHCPv6, SLAAC'ın aksine **bir DHCPv6 sunucusu** aracılığıyla cihazlara IPv6 adresi, DNS, domain-name gibi bilgileri **merkezi olarak** atar. Bu yöntem, IPv4'teki klasik DHCP’ye benzer.

#### DHCPv6 Nasıl Çalışır?

1. Cihaz, bağlantı kurduktan sonra RA mesajını bekler.
2. RA mesajı içinde “**Managed (M-bit)**” bayrağı set edilmişse, cihaz DHCPv6 sunucusundan adres almak zorunda olduğunu anlar.
3. Cihaz, DHCPv6 Discovery mesajı gönderir.
4. Sunucu uygun adresi atar ve cihaz konfigürasyonunu alır.

#### Avantajları:

* Merkezi yönetim sağlar.
* DNS, domain name, lease süresi gibi tüm bilgileri ayarlayabilir.
* Büyük ağlarda daha kontrollü dağıtım yapılır.

#### Sınırlamaları:

* DHCPv6 sunucusu gerekir.
* Daha karmaşık yapılandırma.

### 3. **Stateless DHCPv6 (DHCPv6 Lite)**

Bu yöntem, **SLAAC + DHCPv6** kombinasyonudur. Adres, SLAAC ile atanır, **diğer bilgiler** (DNS, domain-name vb.) DHCPv6'dan alınır.

#### Stateless DHCPv6 Nasıl Çalışır?

1. RA mesajında **Managed (M-bit)** = 0, **Other (O-bit)** = 1 olarak ayarlanır.
2. Cihaz, SLAAC ile adresini oluşturur.
3. Ek konfigürasyon bilgilerini almak için DHCPv6 sunucusuna başvurur.

#### Avantajları:

* SLAAC’ın sadeliğini korurken DNS gibi ayarları DHCPv6 ile sağlar.
* Genelde önerilen yöntemdir (özellikle ev ve kurumsal ağlarda).

#### Sınırlamaları:

* SLAAC’tan gelen Interface ID MAC adresine dayalıysa gizlilik riski oluşturabilir (aşağıda açıklanır).

### Interface ID Oluşturma Yöntemleri

####  EUI-64 Formatı:

* Cihazın MAC adresinden 64-bit uzunluğunda Interface ID oluşturulur.
* Örn: `00:1A:2B:3C:4D:5E` MAC adresi → `021a:2bff:fe3c:4d5e`
* Güvenlik açısından cihazın donanımı izlenebilir, bu nedenle modern cihazlar **rastgele oluşturulan** adresler kullanır.

#### Temporary ve Privacy Addresses:

* Cihazlar her bağlantıda **geçici rastgele** adresler oluşturabilir (RFC 4941).
* Kullanıcı takibi ve gizlilik sorunlarını azaltır.
* Genelde geçici adresler dışa doğru bağlantılar için kullanılır.



## IPv6 Başlık (Header) Yapısı

IPv6 protokolü, IPv4’e göre daha **basit, sabit boyutlu** ve işlenmesi kolay bir başlık yapısına sahiptir. IPv6'nın temel hedeflerinden biri yönlendiriciler (router) tarafından paketin daha hızlı işlenmesini sağlamaktır. Bu nedenle IPv6 başlığı, IPv4'e göre daha az alan içerir ve **sabit 40 bayt** uzunluğundadır.

IPv6 başlığı aşağıdaki alanlardan oluşur:

### IPv6 Temel Başlık Formatı (40 Bayt)

| Alan Adı            | Uzunluk (bit) | Açıklama                                                                                                                                    |
| ------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| Version             | 4             | IP protokolü sürümünü belirtir. IPv6 için her zaman `0110` (6) olarak ayarlanır.                                                            |
| Traffic Class       | 8             | Paketin öncelik düzeyini belirtir (QoS için kullanılır). Eski IPv4 TOS (Type of Service) alanının karşılığıdır.                             |
| Flow Label          | 20            | Aynı akışa ait paketleri tanımlamak için kullanılır. Akış yönlendirme (flow-based routing) gibi hizmetler içindir.                          |
| Payload Length      | 16            | Başlık dışındaki veri (payload) uzunluğunu byte cinsinden belirtir.                                                                         |
| Next Header         | 8             | Bir sonraki üst katman protokolünü veya uzantı başlığını belirtir. IPv4'teki Protocol alanına denktir. Örn: TCP (6), UDP (17), ICMPv6 (58). |
| Hop Limit           | 8             | Paket kaç yönlendiriciden geçebilir? TTL yerine geçer. 1 azalır, 0 olduğunda paket atılır.                                                  |
| Source Address      | 128           | Paketi gönderen cihazın IPv6 adresi.                                                                                                        |
| Destination Address | 128           | Paketin hedef IPv6 adresi.                                                                                                                  |

Toplam: **320 bit (40 bayt)**

### IPv6 Başlık Alanlarının Ayrıntılı Açıklamaları

#### **Version (4 bit)**

* IPv6'yı belirtir. Değeri: `6`
* Ağ cihazları bu alana bakarak paketin IPv6 mı yoksa başka bir protokol mü olduğunu anlar.

#### &#x20;**Traffic Class (8 bit)**

* Trafiğe öncelik verilebilir (QoS).
* DSCP (Differentiated Services Code Point) ve ECN (Explicit Congestion Notification) bilgileri burada tutulabilir.

  * **DSCP**: Ağ içi öncelik tanımlamaları
  * **ECN**: Tıkanıklık bildirimleri için kullanılır
* Bu alan, örneğin VoIP gibi gecikmeye hassas uygulamalara öncelik vermek için önemlidir.

#### **Flow Label (20 bit)**

* Aynı "akışa" (flow) ait paketlerin tanınmasını sağlar.
* Bir multimedya akışı gibi belirli uygulamalara ait trafiği tanımlamak için kullanılır.
* Yönlendiriciler bu alanı kullanarak önceden belirlenmiş yolları kullanabilir.
* Henüz yaygın olarak kullanılmamaktadır ama gelecekte **QoS** ve **trafik mühendisliği** açısından önemlidir.

#### Payload Length (16 bit)

* Başlık dışındaki verinin (payload) uzunluğudur.
* Maksimum değeri: `65.535` bayt.
* Eğer **Uzantı Başlıkları** (Extension Headers) varsa, bunlar da payload içinde sayılır.
* Eğer veri 65.535 bayttan büyükse, **Jumbo Payload** kullanılır (Extension Header ile tanımlanır).

#### Next Header (8 bit)

* IPv4’teki “Protocol” alanının karşılığıdır.
* Başlıktan sonra gelen protokolü veya uzantı başlığını belirtir.
* Örnek değerler:

  * `6` → TCP
  * `17` → UDP
  * `58` → ICMPv6
  * `43` → Routing Header
  * `44` → Fragment Header
  * `60` → Destination Options Header
* **Zincirleme yapı**: Eğer uzantı başlıkları varsa, her başlık bir sonrakini işaret eder.

#### Hop Limit (8 bit)

* IPv4’teki TTL (Time To Live) alanının karşılığıdır.
* Paket her yönlendiriciden geçtiğinde `1` azalır.
* 0 olunca paket atılır, loop oluşumu engellenir.
* Ağda maksimum geçiş sayısını sınırlamak için kullanılır.

#### Source Address (128 bit)

* Kaynak IPv6 adresi.
* Paketin kimden geldiğini belirtir.
* Stateless veya stateful olarak oluşturulmuş olabilir.

#### Destination Address (128 bit)

* Hedef IPv6 adresi.
* Paket bu adrese sahip cihaz için gönderilir.
* Unicast, multicast veya anycast olabilir.

### IPv4 ile IPv6 Başlık Karşılaştırması

| Özellik           | IPv4                     | IPv6                                        |
| ----------------- | ------------------------ | ------------------------------------------- |
| Başlık Boyutu     | Değişken (20-60 bayt)    | Sabit (40 bayt)                             |
| Fragmentation     | Router ve host yapabilir | Sadece kaynak (host) yapar                  |
| Checksum          | Vardır                   | Yok (üst katman protokollere bırakılmıştır) |
| Broadcast         | Vardır                   | Yok (yerine multicast kullanılır)           |
| NAT               | Yaygın                   | Kullanımı gerekmez (geniş adres alanı)      |
| Extension Headers | Sınırlı destek           | Esnek zincirleme yapısı vardır              |


## ICMPv6 

**ICMPv6** (Internet Control Message Protocol for IPv6), IPv6 ağında iletişim hatalarını raporlamak ve ağın durumunu izlemek için kullanılan bir protokoldür. **IPv4'teki ICMP**'nin yerini alır ve IPv6'nın sağlıklı çalışabilmesi için kritik bir rol oynar. ICMPv6, IPv6’nın bazı **gelişmiş özelliklerinin** düzgün çalışması için gereklidir.

ICMPv6'nın **temel işlevi**, ağ cihazlarının iletişimini izlemek, hata mesajları göndermek, komutlar göndermek ve bazı ağ konfigürasyonlarını yönetmektir.

### ICMPv6’nin Temel Fonksiyonları

#### 1. **Error Reporting (Hata Raporlama)**

* ICMPv6, ağdaki iletim hatalarını bildirir. Hedef ulaşılabilir değilse veya bir paket yanlış yönlendirilirse, kaynak cihaza hata raporu gönderilir.
* **Örnek mesajlar**:

  * **Destination Unreachable (Hedef Ulaşılamaz)**: Paket belirtilen hedefe ulaşamıyorsa.
  * **Time Exceeded (Zaman Aşıldı)**: Paket, TTL (Time To Live) süresi bitene kadar hedefine ulaşamamışsa.
  * **Parameter Problem (Parametre Sorunu)**: Paket başlığı hatalıysa (örneğin, bir alan hatalıysa).

#### 2. **Neighbor Discovery Protocol (NDP)**

* ICMPv6, **Neighbor Discovery Protocol** (NDP) için kritik bir bileşendir. NDP, IPv6 adres çözümlemesi, komşu cihaz keşfi, adres doğrulama (DAD) ve yönlendirici reklamları (RA) gibi işlemleri yönetir.
* ICMPv6’nin NDP’ye verdiği mesajlar:

  * **Neighbor Solicitation (NS)**: Cihaz, IP adresine karşılık gelen MAC adresini öğrenmek için bu mesajı gönderir.
  * **Neighbor Advertisement (NA)**: Bir cihaz, kendisinin IP adresine karşılık gelen MAC adresini tanıtır.

#### 3. **Router Advertisement (RA) ve Router Solicitation (RS)**

* **RA** mesajları, IPv6 ağındaki yönlendiriciler tarafından ağdaki cihazlara gönderilir. Bu mesajlar, ağ adresi, prefix, zamanlayıcılar ve diğer ağ bilgilerini içerir.
* **RS** mesajları, cihazların yönlendiricilerden bilgi almak için gönderebileceği istek mesajlarıdır.

#### 4. **Redirect Messages**

* ICMPv6, cihazları daha uygun bir yönlendiriciye yönlendirmek için **Redirect Message** kullanır. Bu, bir cihazın daha iyi bir yolu öğrenmesini sağlar.

#### 5. **Path MTU Discovery (PMTUD)**

* **MTU (Maximum Transmission Unit)**, ağda bir paket için geçerli olan en büyük veri boyutudur.
* ICMPv6, PMTUD işlemi için kullanılır ve bir paket, yönlendirici tarafından kesilirse, ICMPv6 bu durumu kaynak cihaza bildirir.

### ICMPv6 Güvenlik ve Tehditler

ICMPv6, ağ yöneticileri için oldukça faydalı olsa da **güvenlik riskleri** taşıyan bir protokoldür. ICMPv6 mesajları, ağda bilgi toplamak amacıyla kötüye kullanılabilir. Bu nedenle ICMPv6’nın güvenli bir şekilde yapılandırılması önemlidir.

* **Denial of Service (DoS) Saldırıları**: ICMPv6, ağdaki cihazların aşırı yüklenmesine neden olabilecek bir saldırı başlatabilir.
* **Neighbor Spoofing**: ICMPv6 üzerinden yapılan **man-in-the-middle** saldırıları, ağdaki cihazları yanlış yönlendirebilir veya onları sahte cihazlarla aldatabilir.

## IPv6 Güvenlik Özellikleri

IPv6, tasarımı gereği daha **gelişmiş güvenlik özelliklerine** sahiptir. IPv4’te güvenlik genellikle ek protokoller ve ağ cihazlarıyla sağlanırken, IPv6’da bazı güvenlik özellikleri yerleşik olarak sunulur. Ancak bu özelliklerin etkinleştirilmesi veya yönetilmesi genellikle ağ yöneticilerine bağlıdır.

### IPv6’nın Güvenlik Özellikleri

---

### 1. **IPsec (Internet Protocol Security)**

IPsec, IPv6'nın yerleşik bir güvenlik özelliğidir. Bu güvenlik protokolü, verilerin gizliliğini, bütünlüğünü ve kimliğini korur. IPsec, hem **encryption** (şifreleme) hem de **authentication** (kimlik doğrulama) sağlar.

####  IPsec’in Temel Bileşenleri:

* **Authentication Header (AH)**: Verinin kimliğini doğrular ve verinin bütünlüğünü korur.
* **Encapsulating Security Payload (ESP)**: Veriyi şifreler ve verinin gizliliğini sağlar.

IPsec, **end-to-end güvenliği** sağlamak için kullanılır. IPv6'nın doğasında bulunan IPsec desteği, ağdaki tüm verileri şifrelemeyi ve doğrulamayı mümkün kılar.

#### IPsec’in Avantajları:

* Güvenli VPN bağlantıları kurabilir.
* Veri gizliliği, bütünlüğü ve kimlik doğrulaması sağlar.

### 2. **Başlık Yapısındaki Güvenlik İyileştirmeleri**

IPv6 başlık yapısı, IPv4'teki bazı güvenlik açıklarını azaltmak amacıyla daha sadeleştirilmiştir. Örneğin:

* IPv6 başlıklarında **Checksum** alanı kaldırılmıştır. Bu, veri bütünlüğü kontrolünün IP seviyesinde yapılmadığı anlamına gelir; bunun yerine verinin doğruluğu, üst katman protokolleri tarafından sağlanır.
* Yönlendiriciler daha az başlık bilgisiyle çalıştığı için, paket yönlendirme daha hızlı ve güvenli bir şekilde yapılır.

### 3. **Sahte Komşu (Neighbor) Tespiti ve Spoofing Engelleme**

IPv6'daki **Neighbor Discovery Protocol (NDP)**, ağdaki cihazların birbirlerini tanımasına ve IP adreslerini doğru şekilde eşleştirmesine olanak tanır. Ancak bu süreç, kötü niyetli kullanıcılar tarafından **spoofing** (kimlik taklidi) saldırıları için kullanılabilir.

#### NDP Güvenliği:

IPv6, NDP'yi güvenli hale getirmek için **SEND (Secure Neighbor Discovery)** protokolünü kullanabilir. SEND, NDP işlemleri sırasında kullanılan mesajların dijital imzalarla doğrulanmasını sağlar.

* **RA Guard**: Yalnızca doğru yönlendirici RA mesajlarını kabul eder, sahte RA mesajlarını engeller.
* **DHCPv6 Guard**: DHCPv6 sunucusu kimlik doğrulaması sağlar.

### 4. **IPv6 Adres Gizliliği**

IPv6’da, **MAC adreslerine dayalı** **stateless autoconfiguration** ile **yeni IPv6 adresleri** oluşturulabilir. Ancak, bu adresler **izinli takibe** yol açabilir. Bunun önüne geçmek için, IPv6, geçici adresler (privacy addresses) ve **RFC 4941** ile gizliliği artırır. Bu özellik, cihazların her bağlantı için **rastgele** adresler kullanmasına olanak tanır.

#### Gizliliği Sağlayan Yöntemler:

* **Geçici IPv6 adresler**: Cihaz her bağlantı için yeni, rastgele bir adres oluşturur.
* **Privacy Extensions**: MAC adresine dayalı adres oluşturma yerine, güvenli ve rastgele adresler kullanılır.

### 5. **Yerel Link Adresleri ve Güvenlik**

IPv6, **Link-Local** adresleri (`fe80::/10` prefix ile) kullanır. Bu adresler, yalnızca aynı ağ segmentindeki cihazlar arasında iletişim kurmak için kullanılır. Link-local adresleri **yönlendirilemez** ve ağ dışına çıkmaz, bu da güvenliği artırır.

#### Link-Local Adresleri:

* Otomatik olarak **stateless autoconfiguration** ile atanır.
* Güvenlik için, sadece yerel ağdaki cihazlar tarafından görülebilir.

## IPv6 Yönlendirme Protokolleri

IPv6 yönlendirme protokolleri, ağda IPv6 paketlerinin doğru bir şekilde yönlendirilmesini sağlamak için kullanılan protokollerdir. IPv6, **IP adres alanının genişliği** sayesinde, ağ topolojileri daha karmaşık hale gelebilir, bu yüzden etkin yönlendirme protokollerine ihtiyaç duyulur. IPv4’te yaygın olarak kullanılan yönlendirme protokollerinin çoğu, IPv6’da da kullanılabilir, ancak IPv6 için birkaç protokolde değişiklikler yapılmıştır.

### 1. **Statik Yönlendirme (Static Routing)**

IPv6 ağlarında, yönlendirme tablosunun manuel olarak yapılandırıldığı statik yönlendirme kullanılır. Bu yöntem, basit ağ yapılarında tercih edilebilir, ancak ağ büyüdükçe yönetimsel açıdan zorlaşabilir.

#### Özellikleri:

* Basit yapılandırma gerektirir.
* Ağda değişiklik olduğunda manuel müdahale gerekir.
* Küçük ağlarda verimli olabilir, ancak büyük ağlarda yönetim zordur.

### 2. **Dinamik Yönlendirme Protokolleri (Dynamic Routing Protocols)**

IPv6 ağlarında dinamik yönlendirme, ağda meydana gelen değişikliklere hızlı bir şekilde adapte olmak için gereklidir. IPv6, **BGP (Border Gateway Protocol)**, **OSPFv3 (Open Shortest Path First version 3)** ve **EIGRP for IPv6 (Enhanced Interior Gateway Routing Protocol for IPv6)** gibi protokollerle yönlendirme yapabilir.

#### **OSPFv3 (Open Shortest Path First version 3)**

OSPFv3, **OSPF protokolünün IPv6 için optimize edilmiş versiyonudur**. OSPF, bir **link-state routing protokolü** olup, ağdaki tüm yönlendiricilerin birbirlerinin bağlantı durumunu öğrenmesini sağlar ve en kısa yolu hesaplar.

**OSPFv3’ün IPv6'da kullanılabilmesi için yapılan bazı değişiklikler**:

* IPv4’teki OSPF başlıkları, IPv6’ya uyacak şekilde yeniden yapılandırılmıştır.
* OSPFv3, IPv6 yönlendirme tablosunu kullanarak daha geniş bir adres alanı için yönlendirme yapabilir.
* **Link-local adresler** kullanılır; yani, yönlendiriciler arasındaki iletişim yalnızca yerel ağda gerçekleşir.

#### OSPFv3 Özellikleri:

* Hızlı ağ keşfi ve dinamik ağ yönlendirmesi.
* Büyük ağlar için uygundur.
* Birden fazla ağda yol seçimini optimize eder.

#### EIGRP for IPv6 (Enhanced Interior Gateway Routing Protocol for IPv6)

EIGRP, **Cisco tarafından geliştirilmiş bir dinamik yönlendirme protokolüdür** ve IPv6 için de uyarlanmıştır. EIGRP, **distance-vector routing protokolü** olmakla birlikte, **metric (mesafe ölçütü)** olarak band genişliği, gecikme, yük ve güvenilirlik gibi faktörleri kullanarak daha esnek bir yönlendirme sağlar.

**EIGRP for IPv6**, IPv6 adresleme özelliklerine uyum sağlamak için bazı değişiklikler içerir, ancak IPv4’teki EIGRP ile temel yapı ve işleyiş açısından benzerdir.

#### EIGRP for IPv6 Özellikleri:

* **Hızlı topluluklar** ve kolay yapılandırılabilir.
* Hibrid bir yönlendirme protokolü olarak, hem mesafe-vektör hem de link-state özellikleri sunar.
* Yönlendirici arasında daha az bant genişliği kullanır.

#### BGP (Border Gateway Protocol)

**BGP**, özellikle büyük ağlar ve İnternet servis sağlayıcıları (ISP) tarafından kullanılan bir yönlendirme protokolüdür. BGP, **path vector routing** metodolojisini kullanarak ağlar arası veri yönlendirmesi yapar. IPv6'da BGP, **BGP4+** olarak adlandırılır ve IPv6 adres alanını destekleyecek şekilde geliştirilmiştir.

#### BGP Özellikleri:

* İnternet servis sağlayıcıları arasında tercih edilen protokoldür.
* Büyük ağlarda dinamik yönlendirme sağlar.
* IPv6 adreslerini taşıyan IP prefix’leriyle yönlendirme yapar.


## Router'da Temel IPv6 Yapılandırması

IPv6, günümüz IP ağlarının geleceği olarak kabul edilir. Router'larda temel IPv6 yapılandırması, ağın IPv6 adresleri üzerinden iletişim kurmasını sağlar. Bu yapılandırma, yönlendiricinin arabirimlerine IPv6 adresleri atamayı, IPv6 yönlendirmeyi etkinleştirmeyi ve cihazlar arasında bağlantı kurulmasını içerir. Aşağıdaki adımlar bu yapılandırmanın nasıl yapılacağını detaylandırır.

### 1. IPv6 Yönlendirmeyi Etkinleştirme

IPv6 yönlendirme varsayılan olarak **devre dışıdır**. Bu nedenle yapılandırmaya başlamadan önce IPv6 yönlendirme özelliği etkinleştirilmelidir:

```bash
Router(config)# ipv6 unicast-routing
```

Bu komut, router'ın IPv6 yönlendirme işlevini başlatır. IPv4’te bu işlem otomatik olsa da, IPv6’da bu komut zorunludur.

### 2. IPv6 Adres Atama

Her router arayüzüne, ait olduğu ağ bloğundan bir IPv6 adresi atanır. Ayrıca, bu arayüzlerin aktif hâle getirilmesi için `no shutdown` komutu kullanılır.

Örnek:

```bash
Router(config)# interface GigabitEthernet0/0
Router(config-if)# ipv6 address 2001:DB8:1::1/64
Router(config-if)# no shutdown
Router(config-if)# exit
```

Yukarıdaki yapılandırmada:

* `interface GigabitEthernet0/0` → yapılandırılacak arayüzdür.
* `ipv6 address 2001:DB8:1::1/64` → verilen IPv6 adresidir.
* `no shutdown` → arayüzü aktif hale getirir.

### 3. Link-Local IPv6 Adresi (İsteğe Bağlı)

Router'lar, arayüzleri için otomatik olarak **link-local adresleri** oluşturur. Ancak, istenirse bu adresler elle de atanabilir:

```bash
Router(config-if)# ipv6 address FE80::1 link-local
```

Link-local adresler, yönlendiriciler arası haberleşmede (örneğin OSPFv3) kullanılır. Her arayüzde sadece **bir** link-local adres geçerlidir ve bu adres ağ içinde yönlendirilmez.

### 4. Durumun Kontrolü (Doğrulama Komutları)

Yapılandırma sonrası, IPv6 yapılandırmasının doğru yapıldığını aşağıdaki komutlarla kontrol edebilirsin:

#### a) Arayüz bilgileri:

```bash
Router# show ipv6 interface brief
```

Bu komut ile:

* Hangi arayüzlerde IPv6 adres atandığı,
* Link-local adresleri,
* Arayüzün durumu (up/down),
* Atanmış global IPv6 adresleri görülebilir.

#### b) IPv6 yönlendirme tablosu:

```bash
Router# show ipv6 route
```

Bu komut, yönlendiricinin bildiği IPv6 ağları ve yönlendirme türlerini gösterir.

#### c) Ping ile bağlantı testi:

```bash
Router# ping 2001:DB8:1::10
```

Hedef cihazın IPv6 adresine ping atarak bağlantı durumu test edilir.

### 5. Örnek Senaryo

Aşağıdaki örnek, iki farklı ağa bağlı bir router’ın IPv6 yapılandırmasını gösterir:

#### Ağ Planı:

* **Gig0/0** → `2001:DB8:1::1/64`
* **Gig0/1** → `2001:DB8:2::1/64`

#### Komutlar:

```bash
Router> enable
Router# configure terminal
Router(config)# ipv6 unicast-routing

Router(config)# interface gig0/0
Router(config-if)# ipv6 address 2001:DB8:1::1/64
Router(config-if)# no shutdown
Router(config-if)# exit

Router(config)# interface gig0/1
Router(config-if)# ipv6 address 2001:DB8:2::1/64
Router(config-if)# no shutdown
Router(config-if)# exit
```

Bu yapılandırma ile router her iki IPv6 ağına bağlanabilir hale gelir.

## IPv6 Statik Yönlendirme Konfigürasyonu

IPv6 statik yönlendirme, yönlendiricinin paketleri başka IPv6 ağlarına nasıl göndereceğini **elle belirlediğimiz** bir yönlendirme türüdür. Bu, ağ yöneticisinin ağ yollarını manuel olarak tanımladığı anlamına gelir.

Statik yönlendirme:

* Basit ağlarda kullanılır.
* Otomatik protokollere göre daha güvenlidir.
* Konfigürasyonu kolaydır ama büyük ağlarda **ölçeklenebilir değildir**.

### Temel Komut Biçimi

```bash
Router(config)# ipv6 route [hedef-ağ] [prefix uzunluğu] [çıkış-arayüzü | sonraki-router-adresi]
```

### Örnek:

```bash
ipv6 route 2001:DB8:2::/64 Serial0/0/0
```

veya

```bash
ipv6 route 2001:DB8:2::/64 2001:DB8:1::2
```

### Topoloji:

```
[PC0]---[R1]---[R2]---[PC1]
```

* PC0: `2001:DB8:1::10/64`
* PC1: `2001:DB8:3::10/64`
* R1:

  * G0/0: `2001:DB8:1::1/64` (PC0 tarafı)
  * S0/0/0: `2001:DB8:2::1/64` (R2 bağlantısı)
* R2:

  * S0/0/0: `2001:DB8:2::2/64` (R1 bağlantısı)
  * G0/0: `2001:DB8:3::1/64` (PC1 tarafı)

### 🔹 1. IPv6 Yönlendirmeyi Etkinleştir

Her iki router’da:

```bash
Router(config)# ipv6 unicast-routing
```

### 🔹 2. Arayüzlere IPv6 Adresi Ver ve Aç

#### R1:

```bash
R1(config)# interface g0/0
R1(config-if)# ipv6 address 2001:DB8:1::1/64
R1(config-if)# no shutdown

R1(config)# interface s0/0/0
R1(config-if)# ipv6 address 2001:DB8:2::1/64
R1(config-if)# no shutdown
```

#### R2:

```bash
R2(config)# interface s0/0/0
R2(config-if)# ipv6 address 2001:DB8:2::2/64
R2(config-if)# no shutdown

R2(config)# interface g0/0
R2(config-if)# ipv6 address 2001:DB8:3::1/64
R2(config-if)# no shutdown
```

### 🔹 3. Statik Yönlendirme Komutlarını Gir

#### R1’den R2’ye giden ağı tanıt:

```bash
R1(config)# ipv6 route 2001:DB8:3::/64 2001:DB8:2::2
```

#### R2’den R1’e giden ağı tanıt:

```bash
R2(config)# ipv6 route 2001:DB8:1::/64 2001:DB8:2::1
```

Alternatif olarak çıkış arayüzü ile de tanıtılabilir:

```bash
R1(config)# ipv6 route 2001:DB8:3::/64 s0/0/0
R2(config)# ipv6 route 2001:DB8:1::/64 s0/0/0
```

### 🔹 4. PC'lere IPv6 Adresi ve Gateway Ata

#### PC0:

* IPv6: `2001:DB8:1::10/64`
* Gateway: `2001:DB8:1::1`

#### PC1:

* IPv6: `2001:DB8:3::10/64`
* Gateway: `2001:DB8:3::1`

### Test: Ping At

PC0’da:

```bash
ping 2001:DB8:3::10
```

Başarılı bir `reply from...` cevabı alırsan, IPv6 statik yönlendirme başarılı şekilde çalışıyor demektir.


## IPv6 Dinamik Yönlendirme Konfigürasyonu

### Dinamik Yönlendirme Nedir?

IPv6 dinamik yönlendirme, yönlendiricilerin birbirine otomatik olarak **yönlendirme bilgilerini öğrenmesi ve paylaşması** sürecidir. Ağ büyüdükçe manuel olarak statik yönlendirme yapmak zahmetli hâle gelir. Bu nedenle dinamik protokoller tercih edilir.

IPv6 için en yaygın kullanılan dinamik yönlendirme protokolleri şunlardır:

* **RIPng** (RIP Next Generation)
* **OSPFv3** (Open Shortest Path First v3)
* **EIGRP for IPv6** (Cisco'ya özel)

Burada en sade ve temel protokol olan **RIPng** ile yapılandırma anlatılacaktır.

## RIPng Nedir?

RIPng (RIP Next Generation), IPv6 adresleme için geliştirilmiş, mesafe vektör temelli bir dinamik yönlendirme protokolüdür. RIPv2’nin IPv6 sürümüdür.

### RIPng Özellikleri:

* Hop sayısına göre yön seçer (maksimum 15 hop)
* Güncelleme aralığı: 30 saniye
* Protokol numarası: UDP 521
* Multicast: `FF02::9` adresine gönderilir

### Packet Tracer Uygulaması – Örnek Topoloji

```
[PC0]---[R1]---[R2]---[PC1]
```

### IPv6 Adresleme:

* PC0: `2001:DB8:1::10/64`

* PC1: `2001:DB8:3::10/64`

* R1:

  * G0/0: `2001:DB8:1::1/64`
  * S0/0/0: `2001:DB8:2::1/64`

* R2:

  * S0/0/0: `2001:DB8:2::2/64`
  * G0/0: `2001:DB8:3::1/64`



### 🔹 1. IPv6 Yönlendirmeyi Etkinleştir

Her iki router’da:

```bash
Router(config)# ipv6 unicast-routing
```

### 🔹 2. Arayüzlere IPv6 Adresi Ver

#### R1:

```bash
interface g0/0
 ipv6 address 2001:DB8:1::1/64
 no shutdown

interface s0/0/0
 ipv6 address 2001:DB8:2::1/64
 no shutdown
```

#### R2:

```bash
interface s0/0/0
 ipv6 address 2001:DB8:2::2/64
 no shutdown

interface g0/0
 ipv6 address 2001:DB8:3::1/64
 no shutdown
```

### 🔹 3. RIPng Protokolünü Etkinleştir

#### R1:

```bash
ipv6 router rip CCNA
```

Ardından hangi arayüzlerin RIPng’e dahil olacağını belirt:

```bash
interface g0/0
 ipv6 rip CCNA enable

interface s0/0/0
 ipv6 rip CCNA enable
```

#### R2:

```bash
ipv6 router rip CCNA

interface s0/0/0
 ipv6 rip CCNA enable

interface g0/0
 ipv6 rip CCNA enable
```

**Not:** `CCNA`, RIP sürecine verilen isimdir. Aynı ad iki router'da da aynı olmalıdır.

### 🔹 4. PC'lere IPv6 Adresi ve Varsayılan Ağ Geçidi Ver

#### PC0:

* IPv6 Adresi: `2001:DB8:1::10/64`
* Gateway: `2001:DB8:1::1`

#### PC1:

* IPv6 Adresi: `2001:DB8:3::10/64`
* Gateway: `2001:DB8:3::1`

### Test: Ping At

PC0’dan:

```bash
ping 2001:DB8:3::10
```

Başarılı bir şekilde “reply from” cevabı alırsan yönlendirme çalışıyor demektir.

### RIPng ile Dinamik Yönlendirmenin Avantajları

| Avantajlar              | Açıklama                                      |
| ----------------------- | --------------------------------------------- |
| Otomatik yönlendirme    | Yeni ağlar öğrenilir, yönlendirme eklenir     |
| Kolay yapılandırma      | Her arayüze sadece “enable” komutu yeterlidir |
| IPv6’ya özgü geliştirme | IPv4 RIP’ten daha optimize çalışır            |
| Multicast desteği       | UDP üzerinden sadece ilgili yönlendiricilere  |

### Doğrulama Komutları

Router üzerinde yönlendirme tablosunu kontrol et:

```bash
show ipv6 route rip
```

RIP yönlendirme bilgilerini görmek için:

```bash
show ipv6 protocols
```

Arayüzlerin RIP durumunu kontrol etmek için:

```bash
show ipv6 rip CCNA database
```



### OSPFv3 Nedir

OSPFv3, IPv6 ağları için geliştirilmiş **bağ durumlu (link-state)** bir yönlendirme protokolüdür. OSPFv2, IPv4 için; OSPFv3 ise IPv6 için optimize edilmiştir.

### OSPFv3 Özellikleri:

* Bağ durumlu yönlendirme protokolüdür (Link-State).
* Ağ topolojisini her yönlendirici bilir.
* Hızlı yakınsama sağlar.
* CIDR, VLSM ve çok bölgeli yapı destekler.
* IPv6 adresler için geliştirilmiştir.
* Multicast: `FF02::5` (All OSPF Routers) ve `FF02::6` (All OSPF DR/BDR).

### Packet Tracer Örneği: OSPFv3 Konfigürasyonu

### Topoloji:

```
[PC0]---[R1]---[R2]---[PC1]
```

### IPv6 Adresleme:

| Cihaz/Arayüz | Adres                          |
| ------------ | ------------------------------ |
| PC0          | `2001:DB8:1::10/64`, GW: `::1` |
| R1 G0/0      | `2001:DB8:1::1/64`             |
| R1 S0/0/0    | `2001:DB8:2::1/64`             |
| R2 S0/0/0    | `2001:DB8:2::2/64`             |
| R2 G0/0      | `2001:DB8:3::1/64`             |
| PC1          | `2001:DB8:3::10/64`, GW: `::1` |

### 🔹 1. IPv6 Yönlendirmeyi Etkinleştir

Her iki router’da:

```bash
Router(config)# ipv6 unicast-routing
```

### 🔹 2. IPv6 Adreslerini Ver ve Arayüzleri Aç

#### R1:

```bash
interface g0/0
 ipv6 address 2001:DB8:1::1/64
 no shutdown

interface s0/0/0
 ipv6 address 2001:DB8:2::1/64
 no shutdown
```

#### R2:

```bash
interface s0/0/0
 ipv6 address 2001:DB8:2::2/64
 no shutdown

interface g0/0
 ipv6 address 2001:DB8:3::1/64
 no shutdown
```

### 🔹 3. OSPFv3 Süreci Tanımla ve Router ID Belirle

#### R1:

```bash
ipv6 router ospf 10
 router-id 1.1.1.1
```

#### R2:

```bash
ipv6 router ospf 10
 router-id 2.2.2.2
```

> **Not:** OSPFv3’de IPv4 benzeri bir router ID gerekir. Ağda IPv4 yoksa manuel tanımlanmalıdır.

### 🔹 4. Arayüzlere OSPFv3 Aktif Et

R1:

```bash
interface g0/0
 ipv6 ospf 10 area 0

interface s0/0/0
 ipv6 ospf 10 area 0
```

R2:

```bash
interface s0/0/0
 ipv6 ospf 10 area 0

interface g0/0
 ipv6 ospf 10 area 0
```

> **Not:** OSPFv3 konfigürasyonu, OSPFv2’nin aksine “router config” modunda değil, **arayüzler üzerinde** yapılır.

### 🔹 5. PC IPv6 Yapılandırması

#### PC0:

* IPv6 Address: `2001:DB8:1::10/64`
* Default Gateway: `2001:DB8:1::1`

#### PC1:

* IPv6 Address: `2001:DB8:3::10/64`
* Default Gateway: `2001:DB8:3::1`

### Test

PC0’dan:

```bash
ping 2001:DB8:3::10
```

Başarılı bir yanıt alırsan OSPFv3 yönlendirmesi başarıyla yapılandırılmıştır.

### Avantajlar

| Avantaj                  | Açıklama                                         |
| ------------------------ | ------------------------------------------------ |
| Link-State algoritma     | Ağ topolojisinin tamamını bilir                  |
| Hızlı yakınsama          | Ağda değişiklik olursa hızla güncellenir         |
| CIDR & VLSM desteği      | IPv6 ile birlikte esnek ağ yapısı                |
| DR/BDR seçimi            | Büyük ağlarda trafik yükünü azaltır              |
| IPv6 multicast kullanımı | `FF02::5`, `FF02::6` ile sadece ilgili cihazlara |


### EIGRP  Nedir?

EIGRP (Enhanced Interior Gateway Routing Protocol), Cisco tarafından geliştirilen bir **mesafe vektör** ve **bağ durumu (link-state)** yönlendirme protokolüdür. IPv4 için kullanılan EIGRP'nin IPv6 için uyarlanmış sürümüdür.

EIGRP'nin IPv6 sürümü, IPv6 ağlarında yönlendirme bilgilerini dinamik olarak paylaşır ve hızlı yakınsama sağlar.

### EIGRP for IPv6 Özellikleri:

* **Karmaşık ağlar için uygundur**.
* **Düşük bellek kullanımı** ve **gelişmiş yakınsama** sağlar.
* **VLSM ve CIDR** destekler.
* IPv6’a özgüdür.
* **Hızlı yakınsama** sağlamak için DUAL (Diffusing Update Algorithm) algoritması kullanılır.

### Packet Tracer Örneği: EIGRP  IPv6 Konfigürasyonu

### Topoloji:

```
[PC0]---[R1]---[R2]---[PC1]
```

### IPv6 Adresleme:

| Cihaz/Arayüz | Adres                          |
| ------------ | ------------------------------ |
| PC0          | `2001:DB8:1::10/64`, GW: `::1` |
| R1 G0/0      | `2001:DB8:1::1/64`             |
| R1 S0/0/0    | `2001:DB8:2::1/64`             |
| R2 S0/0/0    | `2001:DB8:2::2/64`             |
| R2 G0/0      | `2001:DB8:3::1/64`             |
| PC1          | `2001:DB8:3::10/64`, GW: `::1` |

### 🔹 1. IPv6 Yönlendirmeyi Etkinleştir

Her iki router’da:

```bash
Router(config)# ipv6 unicast-routing
```

### 🔹 2. IPv6 Adreslerini Ver ve Arayüzleri Aç

#### R1:

```bash
interface g0/0
 ipv6 address 2001:DB8:1::1/64
 no shutdown

interface s0/0/0
 ipv6 address 2001:DB8:2::1/64
 no shutdown
```

#### R2:

```bash
interface s0/0/0
 ipv6 address 2001:DB8:2::2/64
 no shutdown

interface g0/0
 ipv6 address 2001:DB8:3::1/64
 no shutdown
```

### 🔹 3. EIGRP for IPv6 Sürecini Başlat

Her iki router’da da EIGRP'yi IPv6 için etkinleştirin:

#### R1:

```bash
ipv6 router eigrp 100
```

#### R2:

```bash
ipv6 router eigrp 100
```

> **Not:** `100` EIGRP sürecinin numarasıdır. Her iki yönlendiricide de aynı numara kullanılmalıdır.

### 🔹 4. EIGRP'yi Arayüzlerde Etkinleştir

Arayüzlerde EIGRP'yi etkinleştirmek için:

#### R1:

```bash
interface g0/0
 ipv6 eigrp 100

interface s0/0/0
 ipv6 eigrp 100
```

#### R2:

```bash
interface s0/0/0
 ipv6 eigrp 100

interface g0/0
 ipv6 eigrp 100
```

### 🔹 5. PC IPv6 Yapılandırması

#### PC0:

* IPv6 Address: `2001:DB8:1::10/64`
* Default Gateway: `2001:DB8:1::1`

#### PC1:

* IPv6 Address: `2001:DB8:3::10/64`
* Default Gateway: `2001:DB8:3::1`

### Test

PC0’dan:

```bash
ping 2001:DB8:3::10
```

Başarılı bir yanıt alırsan EIGRP for IPv6 yönlendirmesi başarıyla yapılandırılmıştır.

### Avantajlar

| Avantaj                       | Açıklama                                                  |
| ----------------------------- | --------------------------------------------------------- |
| Düşük bellek ve CPU kullanımı | Gelişmiş algoritma ve yakınsama hızı sağlar               |
| Kolay yapılandırma            | Basit bir yapılandırma ile ağda hızlı yönlendirme         |
| Hızlı yakınsama               | DUAL algoritmasıyla yönlendirme tablosu hızla güncellenir |
| CIDR ve VLSM desteği          | Esnek ağ yapılandırması sağlar                            |
| Duyarlı yanıtlar              | Ağ değişikliklerine hızlı tepki verir                     |




## IPv6 ICMP (Internet Control Message Protocol)

### ICMPv6 Nedir?

**ICMPv6**, IPv6 ağları üzerinde hata raporlama ve ağ teşhis işlevlerini yerine getiren bir protokoldür. ICMP, Internet Control Message Protocol'ün kısa şeklidir ve IP tabanlı ağlarda hata mesajları ve ağ istatistikleri sağlamak için kullanılır. IPv4'teki ICMP'nin IPv6 sürümüdür.

ICMPv6, IPv6'nın doğru bir şekilde çalışabilmesi için kritik bir rol oynar. IPv6'nın geniş ağ yapısında, paketlerin yönlendirilmesi ve hata mesajlarının iletilmesi için bu protokole ihtiyaç duyulur.

### ICMPv6'nin Rolü

ICMPv6'nın ana işlevi, ağdaki bağlantı hatalarını raporlamak ve ağdaki sorunları tanımlamaktır. IPv4'te ICMP'nin çeşitli türleri varken, IPv6'da ICMPv6 bunun yerini alır. ICMPv6, sadece hata raporlama değil, aynı zamanda **ağ testleri** ve **komşu cihazların keşfi** gibi kritik ağ işlevlerini de sağlar.

Örneğin, ICMPv6, **"ping"** komutunun çalışmasını sağlayan protokoldür. Aynı zamanda **komşu keşfi** (Neighbor Discovery) ve **adres çözümleme** (Address Resolution Protocol - ARP) işlevlerini de IPv6 ağlarında yerine getirir.

### ICMPv6 Türleri

ICMPv6, farklı tiplerde mesajlar gönderir. Temel olarak **Error Message** (Hata Mesajları) ve **Informational Message** (Bilgilendirme Mesajları) olmak üzere iki ana kategoriye ayrılır.

#### 1. **Error Message (Hata Mesajları)**

Bu mesajlar, IPv6 ağındaki sorunları raporlamak için kullanılır. En yaygın hata mesajları şunlardır:

* **Destination Unreachable (Hedef Ulaşılamaz)**: Bir paket hedefe ulaşılamadığında gönderilir. Mesaj, hangi nedenden dolayı ulaşılamadığını belirtir.

  * **Code 0**: Network unreachable (Ağ ulaşılamaz).
  * **Code 1**: Host unreachable (Ana bilgisayar ulaşılamaz).
  * **Code 2**: Protocol unreachable (Protokol ulaşılamaz).

* **Time Exceeded (Zaman Aşıldı)**: Bir paket, TTL (Time-to-Live) değeri sıfırlanana kadar hedefe ulaşamazsa gönderilir. Bu, yönlendiricinin paketlerin sürekli döngüde hareket etmesini önler.

* **Parameter Problem (Parametre Sorunu)**: Paket başlığında bir sorun tespit edildiğinde bu mesaj gönderilir.

#### 2. **Informational Message (Bilgilendirme Mesajları)**

Bu mesajlar, ağın durumuna dair bilgi verir. Başlıca bilgilendirme mesajları şunlardır:

* **Echo Request / Echo Reply (Yankı İsteği / Yankı Yanıtı)**: Ping komutlarıyla kullanılır. Bir cihazdan diğerine bir istek gönderilir ve yanıt alınır. Bu, ağ bağlantısının sağlıklı olduğunu doğrulamak için kullanılır.

* **Router Advertisement (Yönlendirici İlanı)**: Yönlendiriciler, ağdaki cihazlara kendi IPv6 adreslerini ve ağ bağlantı bilgilerini yayımlar.

* **Router Solicitation (Yönlendirici İstek)**: Bir cihaz, bir yönlendiriciden IPv6 bilgisi almak için bu mesajı gönderir.

* **Neighbor Solicitation (Komşu İstek)**: Bir cihaz, aynı ağdaki diğer cihazların bağlantı durumunu ve IPv6 adreslerini öğrenmek için bu mesajı gönderir.

* **Neighbor Advertisement (Komşu İlanı)**: Bir cihaz, komşu cihazlara kendisinin varlığını ve IPv6 adresini bildirmek için bu mesajı gönderir.

* **Redirect**: Yönlendirici, bir cihazı daha verimli bir yönlendirme için başka bir yönlendiriciye yönlendirir.

### ICMPv6 Mesaj Formatı

ICMPv6 mesajları, **başlık** ve **veri** olmak üzere iki ana bileşenden oluşur. Her ICMPv6 mesajı aşağıdaki başlık yapısını içerir:

#### ICMPv6 Başlık Yapısı:

| Alan                    | Boyut    | Açıklama                                            |
| ----------------------- | -------- | --------------------------------------------------- |
| **Type**                | 1 byte   | Mesaj türünü belirtir (örneğin, Echo Request).      |
| **Code**                | 1 byte   | Mesajın alt türünü belirtir.                        |
| **Checksum**            | 2 bytes  | Hata kontrolü için kullanılan kontrol toplamıdır.   |
| **Rest of the Message** | 4+ bytes | Mesaj türüne göre değişir, veriler burada yer alır. |

### ICMPv6'nin Kullanım Alanları

ICMPv6'nın başlıca kullanım alanları şunlardır:

1. **Komşu Keşfi (Neighbor Discovery Protocol - NDP)**: ICMPv6, IPv6 adreslerini çözümlemek ve komşu cihazları keşfetmek için kullanılır. NDP, IPv4'teki ARP'nin yerini alır.

   * **Neighbor Solicitation (NS)**: Bir cihaz, komşularının IPv6 adresini öğrenmek için bu mesajı gönderir.
   * **Neighbor Advertisement (NA)**: Bir cihaz, kendi IPv6 adresi ve bağlantı bilgilerini komşularına bildirir.

2. **Yönlendirici Keşfi (Router Discovery)**: ICMPv6, IPv6 yönlendiricilerinin ağdaki cihazlara IPv6 yapılandırma bilgilerini iletmesi için kullanılır. Yönlendiriciler, **Router Advertisement** mesajları göndererek ağdaki cihazlara yapılandırma bilgisi sağlar.

3. **Yönlendirme Bilgisi (Router Redirect)**: ICMPv6, cihazları daha verimli yönlendirme için başka bir yönlendiriciye yönlendirebilir. Bu, ağ trafiğini optimize etmek için kullanılır.

4. **Bağlantı Testi (Ping)**: ICMPv6, bağlantı testi yapmak için kullanılır. Cihazlar arasında **Echo Request** ve **Echo Reply** mesajları ile ağ bağlantısının sağlam olup olmadığını test eder.

### ICMPv6 ile İlgili Örnekler

#### 1. **Echo Request / Echo Reply (Ping Testi)**

PC0’dan PC1’e bir ping göndererek bağlantıyı test etmek:

```bash
ping 2001:DB8:3::10
```

Eğer bağlantı sağlamsa, PC1’den **Echo Reply** mesajı alınacaktır.

#### 2. **Komşu Keşfi**

Komşu cihazın IPv6 adresini öğrenmek için:

```bash
show ipv6 neighbors
```

### ICMPv6'nin Önemi

ICMPv6, IPv6'nın doğru çalışabilmesi için çok önemlidir çünkü:

* **Komşu cihazların keşfi** ve **adres çözümleme** işlemlerini yönetir.
* **Ağ hatalarını raporlar**, yönlendirme sorunlarını ve paket kayıplarını bildiren mesajlar gönderir.
* **Ping testleri** gibi ağ bağlantısı testlerini yaparak ağın sağlıklı çalışıp çalışmadığını kontrol eder.

ICMPv6, IPv6 ağlarının düzgün çalışması ve ağdaki sorunların hızlı bir şekilde tespit edilmesi için kritik bir protokoldür.


## Kaynakça
1. [RFC 2460 – Internet Protocol, Version 6 (IPv6) Specification](https://tools.ietf.org/html/rfc2460)

2. [RFC 4861 – Neighbor Discovery for IP Version 6 (IPv6)](https://tools.ietf.org/html/rfc4861)















